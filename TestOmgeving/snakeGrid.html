<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style type="text/css">
        * { margin:0; padding:0; } /* to remove the top and left whitespace */

        html, body { width:100%; height:100%; } /* just to be sure these are full screen*/

        canvas { display:block; } /* To remove the scrollbars */

        /* to show the canvas bounds */
        canvas {
            background-color: #eee;
            /*box-shadow:0px 0px 0px 10px black inset;*/
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script type="text/javascript">

        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');
       // resize the canvas to fill browser window dynamically
        window.addEventListener('resize', resizeCanvas, false);

        var wGridth;
        var hGridth;

        function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                wGridth = canvas.width / 10 |0 ;
                hGridth = canvas.height / 10 |0 ;
                /**
                 * Your drawings need to be inside this function otherwise they will be reset when 
                 * you resize the browser window and the canvas goes will be cleared.
                 */
           //     drawStuff(); 
                console.log("width: " + canvas.width + " height: " + canvas.height +"\r\nGrid: " + wGridth, hGridth);
        }

        resizeCanvas();
    

        // x times y equals total cells
        var sizeX = wGridth;
        var sizeY = hGridth;

        //cell size:
        var cellSize = 8;
        var cellSpacing = 0;

        //free space
        var clearColor = "#838383";

        //blocks
        var solidsColor = '#EFEFEF';

        function drawCell(coordinates, color) {
            ctx.fillStyle = color;
            if (cellSpacing) {
                ctx.fillRect (
                    coordinates.x * ( cellSize + cellSpacing ) + cellSpacing,
                    coordinates.y * ( cellSize + cellSpacing ) + cellSpacing,
                    cellSize,
                    cellSize
                );
            } 
            else { 
                ctx.fillRect (
                    coordinates.x * ( cellSize + 1) + 1,
                    coordinates.y * ( cellSize + 1) + 1,
                    cellSize + 1,
                    cellSize + 1
                );
            }
        }
 
        function drawCells() {
            for (var i = 0; i < sizeX; i++) {
                for (var j = 0; j < sizeY; j++) {
                    drawCell({x:i,y:j}, clearColor);
                }
            }
        } 



        var snakes = [];
        
        function snake() {              
            var snake = {
                length: false,
                color: false,
                direction: false,
                segments: []
            };
            return snake;
        }
        
        snakes.push(new snake());
        console.log(snakes[0]);
        snakes[0].segments[0] = {x:5,y:5};
        snakes[0].segments[1] = {x:5,y:4};
        snakes[0].color = "#1009f2";

        function gameLoop() {
            drawSnakes();

            setTimeout(function(){
               gameLoop()
               console.log('test');
            }, 1000 / 15);  
        }


        function drawSnakes() {         
            for (var i = snakes[0].segments.length - 1; i >= 0; i--) {
                if (i === 0) {
                    switch(snakes[0].direction) {
                        case 0: // Right
                            snakes[0].segments[0] = { x: snakes[0].segments[0].x + 1, y: snakes[0].segments[0].y }
                            break;
                        case 1: // Left
                            snakes[0].segments[0] = { x: snakes[0].segments[0].x - 1, y: snakes[0].segments[0].y }
                            break;
                        case 2: // Up
                            snakes[0].segments[0] = { x: snakes[0].segments[0].x, y: snakes[0].segments[0].y - 1 }
                            break;
                        case 3: // Down
                            snakes[0].segments[0] = { x: snakes[0].segments[0].x, y: snakes[0].segments[0].y + 1 }
                            break;
                    }
                } 
                else {
                    if (i === ( snakes[0].segments.length - 1)) {
                        snakes[0].segments[i].x = clearColor;
                        snakes[0].segments[i].y = clearColor;
                    }         
                    snakes[0].segments[i] = { x:  snakes[0].segments[i - 1].x, y:  snakes[0].segments[i - 1].y }  
             
                    drawCell( snakes[0].segments[i],  snakes[0].color);
                }
            }  

        }



    window.addEventListener('keydown', function(e) {
        if (e.keyCode === 38 && snakes[0].direction !== 3) {
            snakes[0].direction = 2; // Up
        } else if (e.keyCode === 40 && snakes[0].direction !== 2) {
            snakes[0].direction = 3; // Down
        } else if (e.keyCode === 37 && snakes[0].direction !== 0) {
            snakes[0].direction = 1; // Left
        } else if (e.keyCode === 39 && snakes[0].direction !== 1) {
            snakes[0].direction = 0; // Right
        }
    });

    drawCells();
    gameLoop();
 
    </script>
</body>
</html>